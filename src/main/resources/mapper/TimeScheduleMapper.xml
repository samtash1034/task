<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.derek.task.mapper.TimeScheduleMapper">

    <!-- 根據用戶ID查詢時間規劃列表 -->
    <select id="selectByUserId" resultType="com.derek.task.entity.TimeSchedule">
        SELECT id,
               user_id AS userId,
               start_time AS startTime,
               end_time AS endTime,
               monday,
               tuesday,
               wednesday,
               thursday,
               friday,
               saturday,
               sunday,
               status
        FROM time_schedule
        WHERE user_id = #{userId}
        ORDER BY start_time
    </select>

    <!-- 批量插入固定時間段的時間規劃 -->
    <insert id="insertFixedTimeSlots" parameterType="Integer">
        INSERT INTO time_schedule (user_id, start_time, end_time, monday, tuesday, wednesday, thursday, friday, saturday, sunday, status)
        VALUES
            (#{userId}, '00:00:00', '07:50:00', NULL, NULL, NULL, NULL, NULL, NULL, NULL, '0'),
            (#{userId}, '07:50:00', '08:10:00', NULL, NULL, NULL, NULL, NULL, NULL, NULL, '0'),
            (#{userId}, '08:10:00', '12:00:00', NULL, NULL, NULL, NULL, NULL, NULL, NULL, '0'),
            (#{userId}, '12:00:00', '13:00:00', NULL, NULL, NULL, NULL, NULL, NULL, NULL, '0'),
            (#{userId}, '13:00:00', '16:35:00', NULL, NULL, NULL, NULL, NULL, NULL, NULL, '0'),
            (#{userId}, '16:35:00', '17:00:00', NULL, NULL, NULL, NULL, NULL, NULL, NULL, '0'),
            (#{userId}, '17:00:00', '18:00:00', NULL, NULL, NULL, NULL, NULL, NULL, NULL, '0'),
            (#{userId}, '18:00:00', '19:00:00', NULL, NULL, NULL, NULL, NULL, NULL, NULL, '0'),
            (#{userId}, '19:00:00', '20:00:00', NULL, NULL, NULL, NULL, NULL, NULL, NULL, '0'),
            (#{userId}, '20:00:00', '22:00:00', NULL, NULL, NULL, NULL, NULL, NULL, NULL, '0'),
            (#{userId}, '22:00:00', '24:00:00', NULL, NULL, NULL, NULL, NULL, NULL, NULL, '0')
    </insert>

    <update id="update" parameterType="com.derek.task.entity.TimeSchedule">
        UPDATE time_schedule
        SET start_time = #{startTime},
            end_time = #{endTime},
            monday = #{monday},
            tuesday = #{tuesday},
            wednesday = #{wednesday},
            thursday = #{thursday},
            friday = #{friday},
            saturday = #{saturday},
            sunday = #{sunday},
            status = #{status}
        WHERE id = #{id}
    </update>

</mapper>
